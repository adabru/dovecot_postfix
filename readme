Run

```
git clone https://github.com/adabru/dovecot_postfix.git
cd dovecot_postfix
docker build -t mail .

# get inside the container:
docker run --rm --name test -ti -p 465:465 -p 993:993 -e DOMAIN=yourdomain.com mail /bin/sh
```

```
# test global connectivity in both directions
ping adabru.de
nc -v -l -p 465

# change your domain
sed -i "s/example\.com/$DOMAIN/" /etc/postfix/main.cf

syslogd
postfix start

# check logs
tail /var/log/messages

# start a new terminal
```

```
DOMAIN=yourdomain.com

# check connection
nc $DOMAIN 465

# check smtp relay
msmtp -v --host=$DOMAIN --port=465 --tls=on --tls-starttls=off --tls-certcheck=off -S

echo -e "Subject: Hello\n\nWorld!" | \
msmtp -v --host=$DOMAIN --port=465 --tls=on --tls-starttls=off  --tls-certcheck=off --auth=off \
  --from=info@$DOMAIN --add-missing-from-header=on --add-missing-date-header=on \
  -- info@$DOMAIN
```
